{"version":3,"sources":["config.js","Components/Messages.js","Components/Header.js","App.js","reportWebVitals.js","index.js"],"names":["MESSAGES_ABI","Messages","message","index","messages","Header","class","href","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","aria-current","App","props","state","account","messageList","undefined","0","toSend","user","targetUser","chatHash","this","loadBlockchainData","salt","encoded","a","textToChars","text","split","map","c","charCodeAt","applySaltToChar","code","reduce","b","match","hex","parseInt","charCode","String","fromCharCode","join","n","Number","toString","substr","decrypt","web3","Web3","eth","getAccounts","accounts","setState","Contract","console","log","methods","messageCount","call","getChatLength","chatCount","hashCode","sort","getMessages","encrypted_messages","decrypted_messages","i","length","encryption","decrpted","push","finalData","1","2","3","objDiv","document","getElementById","scrollTop","scrollHeight","crypt","encrypted_message","createMessage","send","from","gas","once","receipt","value","className","placeholder","aria-describedby","onChange","e","target","style","width","height","overflowX","overflowY","rows","onClick","addOne","bind","Component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.4052c276.chunk.js","sourcesContent":["\n\nexport const MESSAGES_ADDRESS = '0x8EbF6Fe4732a4843A268da0CE4592B7C10652B11'\nexport const MESSAGES_ABI = [\n    {\n      \"constant\": true,\n      \"inputs\": [],\n      \"name\": \"messageCount\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"payable\": false,\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"constant\": true,\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"messages\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"sentFrom\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"sentTo\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"content\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"hashToken\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"id\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"payable\": false,\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"constant\": true,\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"messagesArray\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"sentFrom\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"sentTo\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"content\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"hashToken\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"id\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"payable\": false,\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"constant\": false,\n      \"inputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"_sentFrom\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"_sentTo\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"_content\",\n          \"type\": \"string\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"_hashToken\",\n          \"type\": \"string\"\n        }\n      ],\n      \"name\": \"createMessage\",\n      \"outputs\": [],\n      \"payable\": false,\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"constant\": true,\n      \"inputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"_hashToken\",\n          \"type\": \"string\"\n        }\n      ],\n      \"name\": \"getChatLength\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"payable\": false,\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"constant\": true,\n      \"inputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"_hashToken\",\n          \"type\": \"string\"\n        }\n      ],\n      \"name\": \"getMessages\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string[]\",\n          \"name\": \"\",\n          \"type\": \"string[]\"\n        },\n        {\n          \"internalType\": \"string[]\",\n          \"name\": \"\",\n          \"type\": \"string[]\"\n        },\n        {\n          \"internalType\": \"string[]\",\n          \"name\": \"\",\n          \"type\": \"string[]\"\n        },\n        {\n          \"internalType\": \"uint256[]\",\n          \"name\": \"\",\n          \"type\": \"uint256[]\"\n        }\n      ],\n      \"payable\": false,\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }\n  ]","import React from 'react'\n\nconst Messages = ({message,  index, messages}) => {\n    return (\n        <div>\n            <p>{message}: {messages[2][index]}</p>\n        </div>\n    )\n}\n\nexport default Messages\n","import React from 'react'\n\nconst Header = () => {\n    return (\n        <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n        <div class=\"container-fluid\">\n          <a class=\"navbar-brand\" href=\"#\">Smart Messenger</a>\n          <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n            <span class=\"navbar-toggler-icon\"></span>\n          </button>\n          <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n            <ul class=\"navbar-nav\">\n              <li class=\"nav-item\">\n                <a class=\"nav-link active\" aria-current=\"page\" href=\"#\">Home</a>\n              </li>\n              <li class=\"nav-item\">\n                <a class=\"nav-link\" href=\"#\">About</a>\n              </li>\n           \n            </ul>\n          </div>\n        </div>\n      </nav>\n    )\n}\n\nexport default Header\n","import React, { Component } from 'react'\nimport { findAllInRenderedTree } from 'react-dom/test-utils'\nimport Web3 from 'web3'\nimport './App.css'\nimport { MESSAGES_ABI, MESSAGES_ADDRESS } from './config'\nimport Messages from './Components/Messages'\nimport Header from './Components/Header'\nclass App extends Component {\n  componentWillMount() {\n    this.loadBlockchainData()\n\n\n   \n  }\n  \n  async decrypt (salt, encoded){\n    const textToChars = (text) => text.split(\"\").map((c) => c.charCodeAt(0));\n    const applySaltToChar = (code) => textToChars(salt).reduce((a, b) => a ^ b, code);\n    return encoded\n      .match(/.{1,2}/g)\n      .map((hex) => parseInt(hex, 16))\n      .map(applySaltToChar)\n      .map((charCode) => String.fromCharCode(charCode))\n      .join(\"\");\n  };\n  async loadBlockchainData() {\n    const crypt = (salt, text) => {\n      const textToChars = (text) => text.split(\"\").map((c) => c.charCodeAt(0));\n      const byteHex = (n) => (\"0\" + Number(n).toString(16)).substr(-2);\n      const applySaltToChar = (code) => textToChars(salt).reduce((a, b) => a ^ b, code);\n    \n      return text\n        .split(\"\")\n        .map(textToChars)\n        .map(applySaltToChar)\n        .map(byteHex)\n        .join(\"\");\n    };\n    \n    const decrypt = (salt, encoded) => {\n      const textToChars = (text) => text.split(\"\").map((c) => c.charCodeAt(0));\n      const applySaltToChar = (code) => textToChars(salt).reduce((a, b) => a ^ b, code);\n\n      return encoded\n        .match(/.{1,2}/g)\n        .map((hex) => parseInt(hex, 16))\n        .map(applySaltToChar)\n        .map((charCode) => String.fromCharCode(charCode))\n        .join(\"\");\n    };\n\n\n    // decrypting\n    //const decrypted_string = decrypt(\"awoi0012d\", encrypted_text); // -> Hello\n //4d657373616765\n //console.log(\"STUFF\",encrypted_text,decrypted_string)\n    const web3 = new Web3(\"http://108.29.140.197:7545\")\n    const accounts = await web3.eth.getAccounts()\n    this.setState({ account: accounts[0] })\n    const messageList = new web3.eth.Contract(MESSAGES_ABI, MESSAGES_ADDRESS)\n    this.setState({ messageList })\n    console.log(\"HELLO\", messageList.methods)\n    const messageCount = await messageList.methods.messageCount().call()\n    const chatCount = await messageList.methods.getChatLength(this.state.chatHash).call()\n    console.log(\"Chat length\", chatCount)\n    this.setState({ chatCount })\n\n    this.setState({ messageCount })\n    if(this.state.chatHash != ''){\n      \n      var hashCode = [this.state.user,this.state.targetUser]\n      hashCode.sort()\n      hashCode = hashCode[0] + hashCode[1]\n\n      //hashCode.sort()\n      const messages = await messageList.methods.getMessages(hashCode).call()\n      var encrypted_messages = messages[2]\n      var decrypted_messages = []\n      for(var i = 0; i< encrypted_messages.length;i++){\n           var decrpted = await decrypt(this.state.encryption, encrypted_messages[i])\n        decrypted_messages.push(decrpted)\n      //  encrypted_messages[2][i] = \n\n        //encrypted_messages['2'][i] = decrypt(this.state.encryption, messages['2'][i])\n      }\n      var finalData = {\n        0 : messages['0'],\n        1 : messages['1'],\n        2 : decrypted_messages,\n        3 : messages['3']\n      }\n\n      this.setState({ chatCount : decrypted_messages.length })\n      this.setState({ messages: finalData })\n      var objDiv = document.getElementById(\"messages\");\n      objDiv.scrollTop = objDiv.scrollHeight;\n\n    }\n    //setTimeout(function(e){ console.log(\"E\",e) /*this.loadBlockchainData()*/ }, 3000);\n\n    \n\n  }\n \n \n async addOne() {\n  const crypt = (salt, text) => {\n    const textToChars = (text) => text.split(\"\").map((c) => c.charCodeAt(0));\n    const byteHex = (n) => (\"0\" + Number(n).toString(16)).substr(-2);\n    const applySaltToChar = (code) => textToChars(salt).reduce((a, b) => a ^ b, code);\n  \n    return text\n      .split(\"\")\n      .map(textToChars)\n      .map(applySaltToChar)\n      .map(byteHex)\n      .join(\"\");\n  };\n  var hashCode = [this.state.user,this.state.targetUser]\n  hashCode.sort()\n\n  const encrypted_message = crypt(this.state.encryption, this.state.toSend); // -> 426f666665\n  hashCode = hashCode[0] + hashCode[1]\n    this.state.messageList.methods.createMessage(this.state.user, this.state.targetUser,encrypted_message, hashCode).send({from: this.state.account, gas:3000000}).once('receipt', async (receipt) => {\n      this.loadBlockchainData()\n      document.getElementById('message').value = ''\n      \n      console.log(receipt)\n      \n    })\n    console.log(\"sent\")\n}\n  constructor(props) {\n    super(props)\n    this.state = { account: '' , messageList : undefined, messages : {0: []}, toSend : \"\", user : '', targetUser : '', chatHash : ''}\n  }\n\n  render() {\n    return (\n      <div>\n                <Header />\n\n      <div className=\"container\">\n        <h1 >Smart Messenger</h1>\n        <p>A peer-to-peer encrypted messaging service that only uses blockchain to transfer and store encrypted messages.</p>\n     \n        <div class=\"input-group mb-3\">\n        <span class=\"input-group-text\" id=\"basic-addon1\"><i class=\"fas fa-key\"></i></span>\n        <input type=\"text\" class=\"form-control\" placeholder=\"Encryption Key\" aria-label=\"Encryption Key\" aria-describedby=\"basic-addon1\" onChange={(e)=>{this.setState({encryption : e.target.value})}}/>\n        </div>\n        <div class=\"input-group mb-3\">\n        <span class=\"input-group-text\" id=\"basic-addon1\">@</span>\n        <input type=\"text\" class=\"form-control\" placeholder=\"Your username\" aria-label=\"Your username\" aria-describedby=\"basic-addon1\" onChange={(e)=>{this.setState({user : e.target.value, chatHash : this.state.user +this.state.targetUser})}}/>\n        </div>\n        <div class=\"input-group mb-3\">\n        <span class=\"input-group-text\" id=\"basic-addon1\">@</span>\n        <input type=\"text\" class=\"form-control\" placeholder=\"Target username\" aria-label=\"Target username\" aria-describedby=\"basic-addon1\" onChange={(e)=>{this.setState({targetUser : e.target.value, chatHash : this.state.user +this.state.targetUser})}}/>\n        </div>\n    \n\n        <p>Total chats: {this.state.messageCount}</p>\n        <p>Your chats: {this.state.chatCount}</p>\n        <div id =\"messages\" style={{width:'auto',height:'400px',overflowX : 'hidden', overflowY : 'auto'}}>\n         {this.state.messages[0].map((message, index)=> (<Messages message = {message} index= {index} messages = {this.state.messages} />))}\n\n        </div>\n        <div class=\"row g-2\">\n\n  <textarea class=\"form-control\" id=\"message\" rows=\"3\" onChange={(e)=>{this.setState({toSend : e.target.value})}} placeholder=\"Aa\"></textarea>\n\n        <button type=\"button\" class=\"btn btn-primary\" onClick={this.addOne.bind(this)}><i class=\"fas fa-paper-plane\"></i></button>\n        <button type=\"button\" class=\"btn btn-success\" onClick={this.loadBlockchainData.bind(this)}><i class=\"fas fa-sync\"/>Refresh chat</button>\n\n</div>\n     \n        <br/>\n\n\n       \n      </div>\n      </div>\n\n    );\n  }\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}